import{f as e,g as a,d as l}from"./UserApi-253232f7.js";import{e as s,r as o,C as r,o as t,i as d,k as i,c as u,h as n,J as m,d as p,B as c,L as g,M as h,I as f,H as w,E as v,p as y,b,m as _,u as P,y as V,a3 as k}from"./index-b5355031.js";import{_ as x}from"./_plugin-vue_export-helper-1b428a4d.js";const C=e=>(y("data-v-c2606257"),e=e(),b(),e),L={class:"logo",style:{width:"68px",height:"68px"}},E=[C((()=>p("use",{href:"#BYlogo"},null,-1)))],I=C((()=>p("h4",null,"Create your account",-1))),U=x(s({__name:"register",props:{fromId:{type:String,default:""}},emits:["toLogin"],setup(a,{expose:l,emit:s}){const y=a,b=o(!1),_=o(),P=r({username:"",email:"",password:"",checkPass:"",fromId:y.fromId}),V=r({username:[{required:!0,message:"Please input User name",trigger:"blur"},{min:3,max:18,message:"Length should be 3 to 18",trigger:"blur"}],email:[{required:!0,message:"Please input email",trigger:"blur"},{type:"email",message:"Please enter a valid email",trigger:"blur"}],password:[{required:!0,message:"Please input password",trigger:"blur"},{min:8,max:32,message:"Length should be 8 to 32",trigger:"blur"},{validator:(e,a,l)=>{if(""===a)l(new Error("Please input the password"));else{if(""!==P.checkPass){if(!_.value)return;_.value.validateField("checkPass",(()=>null))}l()}},trigger:"blur"}],checkPass:[{required:!0,message:"Please input password",trigger:"blur"},{validator:(e,a,l)=>{""===a?l(new Error("Please input the password again")):a!==P.password?l(new Error("Two inputs don't match!")):l()},trigger:"blur"}]}),k=()=>{b.value=!1,setTimeout((()=>{s("toLogin")}),250)};return l({showModal:()=>{b.value=!0}}),(a,l)=>{const s=g,o=h,r=f,y=w,x=v;return t(),d(x,{modelValue:b.value,"onUpdate:modelValue":l[5]||(l[5]=e=>b.value=e),"close-on-click-modal":!1,width:"600",class:"benchyard-dialog"},{default:i((()=>[(t(),u("svg",L,E)),I,n(y,{ref_key:"ruleFormRef",ref:_,model:P,rules:V,class:"demo-ruleForm","label-position":"top"},{default:i((()=>[n(o,{label:"User name",prop:"username"},{default:i((()=>[n(s,{modelValue:P.username,"onUpdate:modelValue":l[0]||(l[0]=e=>P.username=e),class:"noPaddingIpt",placeholder:"Enter your name",autocomplete:"off"},null,8,["modelValue"])])),_:1}),n(o,{label:"Email",prop:"email"},{default:i((()=>[n(s,{modelValue:P.email,"onUpdate:modelValue":l[1]||(l[1]=e=>P.email=e),class:"noPaddingIpt",placeholder:"Enter your email",autocomplete:"off"},null,8,["modelValue"])])),_:1}),n(o,{label:"Password",prop:"password"},{default:i((()=>[n(s,{modelValue:P.password,"onUpdate:modelValue":l[2]||(l[2]=e=>P.password=e),class:"noPaddingIpt",placeholder:"Must have 8-32 characters",type:"password",autocomplete:"off","show-password":!0},null,8,["modelValue"])])),_:1}),n(o,{label:"Password again",prop:"checkPass"},{default:i((()=>[n(s,{modelValue:P.checkPass,"onUpdate:modelValue":l[3]||(l[3]=e=>P.checkPass=e),class:"noPaddingIpt",placeholder:"Same as above",type:"password",autocomplete:"off","show-password":!0},null,8,["modelValue"])])),_:1}),n(r,{type:"primary",class:"submit",size:"large",onClick:l[4]||(l[4]=a=>(async a=>{a&&await a.validate(((a,l)=>{a&&e({name:P.username,username:P.username,email:P.email,password:P.password}).then((e=>{c({message:"resigster is successfully",type:"success",duration:3e3}),k()}))}))})(_.value))},{default:i((()=>[m("Sign up")])),_:1})])),_:1},8,["model","rules"]),p("p",{class:"tips"},[m("Already have an account? "),p("a",{href:"javascript:;",onClick:k,title:"Log in"},"Log in")])])),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-c2606257"]]),F=e=>(y("data-v-5d11836e"),e=e(),b(),e),j={class:"logo",style:{width:"68px",height:"68px"}},q=[F((()=>p("use",{href:"#BYlogo"},null,-1)))],R=F((()=>p("h4",null,"Log in",-1))),S=F((()=>p("div",{style:{flex:"1"}},null,-1))),T=F((()=>p("div",{class:"or"},null,-1))),M=x(s({__name:"login",emits:["toRegister","toFindPassword"],setup(e,{expose:s,emit:y}){const b=_(),x=P(),C=o(!1),L=o(),E=r({email:"",password:""}),I=r({email:[{required:!0,message:"Please input email",trigger:"blur"},{type:"email",message:"Please enter a valid email",trigger:"blur"}],password:[{required:!0,message:"Please input password",trigger:"blur"},{min:8,max:32,message:"Length should be 8 to 32",trigger:"blur"}]}),U=()=>{C.value=!1,setTimeout((()=>{y("toRegister")}),250)},F=()=>{C.value=!1,setTimeout((()=>{y("toFindPassword")}),250)},M=async e=>{e&&await e.validate(((e,s)=>{if(e){const e=k.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});document.addEventListener("keydown",(a=>{"Escape"===a.key&&e.close()})),a({identifier:E.email,password:E.password}).then((a=>{b.push({path:"/"}),l().then((a=>{x.setLogin(a.data),e.close()})),C.value=!1})).catch((a=>{e.close(),c({message:a.response.data.message,type:"error",duration:3e3})}))}}))},B=e=>{13!=e.keyCode&&100!=e.keyCode||M(L.value)};return s({showModal:()=>{C.value=!0}}),(e,a)=>{const l=g,s=h,o=f,r=w,c=v;return t(),d(c,{modelValue:C.value,"onUpdate:modelValue":a[3]||(a[3]=e=>C.value=e),"close-on-click-modal":!1,width:"600",class:"benchyard-dialog"},{default:i((()=>[(t(),u("svg",j,q)),R,n(r,{ref_key:"ruleFormRef",ref:L,model:E,rules:I,class:"ruleForm","label-position":"top"},{default:i((()=>[n(s,{label:"Email",prop:"email"},{default:i((()=>[n(l,{modelValue:E.email,"onUpdate:modelValue":a[0]||(a[0]=e=>E.email=e),class:"noPaddingIpt",placeholder:"Enter your email"},null,8,["modelValue"])])),_:1}),n(s,{prop:"password"},{label:i((()=>[p("div",{class:"form-item-label"},[m(" Password "),S,p("a",{onClick:F,class:"forgotpwd"},"Forgot password?")])])),default:i((()=>[n(l,{modelValue:E.password,"onUpdate:modelValue":a[1]||(a[1]=e=>E.password=e),class:"noPaddingIpt",placeholder:"Enter your password",onKeyup:V(B,["enter"]),type:"password","show-password":!0},null,8,["modelValue","onKeyup"])])),_:1}),n(o,{type:"primary",class:"submit",size:"large",onClick:a[2]||(a[2]=e=>M(L.value))},{default:i((()=>[m("Sign in")])),_:1}),T,p("div",{class:"register-wrap"},[p("a",{href:"javascript:;",onClick:U,title:"Create new accout"},"Create new accout")])])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-5d11836e"]]),B=e=>(y("data-v-9ea75a4d"),e=e(),b(),e),z={class:"logo",style:{width:"68px",height:"68px"}},Y=[B((()=>p("use",{href:"#BYlogo"},null,-1)))],A=B((()=>p("h4",null,"Find your password",-1))),K=x(s({__name:"findPassword",emits:["toRegister","toLogin"],setup(e,{expose:a,emit:l}){const s=o(!1),y=o(),b=r({email:"",password:""}),_=r({email:[{required:!0,message:"Please input email",trigger:"blur"},{type:"email",message:"Please enter a valid email",trigger:"blur"}]}),P=()=>{s.value=!1,setTimeout((()=>{l("toRegister")}),250)},V=()=>{s.value=!1,setTimeout((()=>{l("toLogin")}),250)},k=()=>{y.value.validate((e=>{if(!e)return!1;c({message:"Check your email to reset the password.",type:"success",duration:3e3,onClose:()=>{s.value=!1}})}))};return a({showModal:()=>{s.value=!0}}),(e,a)=>{const l=g,o=h,r=f,c=w,x=v;return t(),d(x,{modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value=e),"close-on-click-modal":!1,width:"600",class:"benchyard-dialog"},{default:i((()=>[(t(),u("svg",z,Y)),A,n(c,{ref_key:"ruleFormRef",ref:y,model:b,rules:_,class:"ruleForm","label-position":"top"},{default:i((()=>[n(o,{label:"Email",prop:"email"},{default:i((()=>[n(l,{modelValue:b.email,"onUpdate:modelValue":a[0]||(a[0]=e=>b.email=e),class:"noPaddingIpt",placeholder:"Enter your email",autocomplete:"off"},null,8,["modelValue"])])),_:1}),n(r,{type:"primary",class:"submit",size:"large",onClick:k},{default:i((()=>[m("Enter")])),_:1}),p("div",{class:"register-wrap"},[p("a",{href:"javascript:;",onClick:P,title:"Log in"},"Log in"),m(" / "),p("a",{href:"javascript:;",onClick:V,title:"Sign up"},"Sign up")])])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-9ea75a4d"]]);export{U as C,M as a,K as b};
